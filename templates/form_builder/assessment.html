{% load static %}

<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
          
    <style>
      .jumbotron {
      padding: 2rem 1rem;
      margin-bottom: 2rem;
      background-color: #e9ecef;
      border-radius: .3rem;
      }
  
      .unstyled-button {
      border: none;
      padding: 0;
      background: none;
      }
  
      .deleteMe{
          float: right;
      }
  
      .jumbotron {
          padding: 2rem 1rem;
          margin-bottom: 2rem;
          background-color: #e9ecef;
          border-radius: .3rem;
        }
        .unstyled-button {
          border: none;
          padding: 0;
          background: none;
        }
        
        .col-6 .form-select{
          background-image: none;
          border:none;
          border-radius: 0;
        } 
        
        .dropdown_options .row{
          margin-left:5px;
        }

        .project{
          margin-bottom:20px;
        }

        .group{
          text-align:center;
        }

        .misc {
          color:#961f63;
          background-color: #fef5fa; 
          margin-left:15px;
          margin-right:15px;
        }

        .btn-success{
          background-color: #0f9f1c;
        }
        
        .invalid-feedback{
          font-size:13px;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
          margin-left:0.5em;
        }

        .validate_KA{
          margin-left:-10.3em; 
          width:12em;
        }

        .form-control.is-valid, .was-validated .form-control:valid, .was-validated .form-select:valid:not([multiple]):not([size]) {
          border-color: #ced4da;
          padding-right: None;
          background-image: None;
          background-repeat: None;
          background-position: None;
          background-size: None;
        }
        
        .save{
          width: 150px;
          height: 48px;
          margin: 0 15px 0 0;
          border-radius: 3px;
          font-size:12px;
          border: none;
        }

        #id_sn{
          width:59px;
          height:50px;
        }

        #id_label_type_0{
          margin-top:0.6em; 
          margin-right:2em;
          font-weight:500;
          font-size:12px;
        }

        #id_label_type_1{
          margin-top:0.39em;
        }
        
        .performance_type .form-check {
          margin-top: 0.6em;
          margin-right: 2em;
          font-weight: 500;
          font-size: 12px;
        }

        #id_sn{
          width:59px;
          height:50px;
        }

        #id_type{
          width:400px;
          height:40px;
          display:inline;
        }
      </style>
    <script>
      function add_dropdown_option(id){
      // Adding HTML code into dropdown_option
        var dropdown = ``;
        dropdown += `
          <div class="row row-cols-3 mb-2">
              <div class="col-1 bg-white" style='padding-top:2px; padding-left:2px;'><i class="bi bi-three-dots-vertical bg-white"></i></div>
              <div class="col-6 p-0">
                {{outcome_form}}
              </div>
              <div class="col-2 bg-white text-right">
                  <div class='deleteMe' onclick="delete_dropdown(this)">X</div>
              </div>
          </div>
          `;

        id.closest('div').querySelector(".dropdown_options").innerHTML += dropdown;
      }
      
      function delete_dropdown(id){
        id.closest(".row").remove(); 
      }

      function add_performance_statement(id){
        var p_count = id.closest('.accordion-collapse').querySelector('.performance_statement').lastElementChild.querySelector('.performance_type').querySelector('.form-check-input').getAttribute('name');
        p_count = parseInt(p_count.substr(p_count.length -1))+1;
        var c_count = id.closest('.accordion-collapse').getAttribute('id');
        c_count = parseInt(c_count.substr(c_count.length -1));
        var a_count = id.closest('.project').querySelector('.accordion-header').getAttribute('id');
        a_count = parseInt(a_count.substr(a_count.length -1))
        var performance_statement = document.createElement("div");
        performance_statement.className = "mt-3 mx-3 mb-4";
        performance_statement.innerHTML = `
          <div class="container pb-4" style="background-color: #e9ecef;">
            <div class="row">
              <div class="col-sm-1"></div>
              
              <div class="col-sm-4 performance_type" style="display:inline-flex;">
                {% for choice in performance_form.label_type %}
                  <div class="form-check">
                    {{choice.tag}}
                    {{ choice.choice_label }}
                    {% if forloop.last %}
                      <div class="invalid-feedback validate_KA">
                        All fields must be filled in
                      </div>
                    {% endif %}
                  </div>
                {% endfor %}
              </div>

              <div class="col-sm-4"></div>
              <div class="col-sm-3"><label style="font-weight:500;font-size:12px;margin-top:12px;">Dropdown Placeholder Text</label></div>
            </div>
            <div class="m-2">
              <div class="row mb-3">
                <div class="col-sm-1">
                  {{ performance_form.sn }}
                  <div class="invalid-feedback" style="font-size:10px;">
                    All fields must be filled in
                  </div>
                </div>
                <div class="col-sm-4">
                  {{ performance_form.label }}
                  <div class="invalid-feedback">
                    All fields must be filled in
                  </div>
                </div>
                <div class="col-sm-4">
                  {{performance_form.criteria}}
                  <div class="invalid-feedback">
                    All fields must be filled in
                  </div>
                </div>
                <div class="col-sm-3">    
                  {{performance_form.outcome_title}}
                  <div>
                    <label style="font-weight:500;font-size:12px;margin-top:12px; margin-left:5px;">Dropdown Options</label>
                    <div class="dropdown_options"></div>
                    <button type='button' class="unstyled-button" onclick="add_dropdown_option(this)">
                        <label style="font-weight:300;font-size:12px;margin-top:12px; margin-left:5px;">+ Add Option</label>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
        id.closest('.border').querySelector('.performance_statement').appendChild(performance_statement);
      }
        
      function add_competency_statement(id){
        var c_count = id.closest('.competencies').querySelector('.accordion').lastElementChild.querySelector(".accordion-header").getAttribute('id');
        c_count = parseInt(c_count.substr(c_count.length -1))+1;
        var a_count = id.closest('.project').querySelector('.accordion-header').getAttribute('id');
        a_count = parseInt(a_count.substr(a_count.length -1))
        var competency_statement = document.createElement("div");
        competency_statement.className = "pt-0 jumbotron accordion-item";
        competency_statement.innerHTML = `
          <!-- Start of Competency Standard Template -->
          <h2 class="accordion-header" id="competency_heading_${a_count}_${c_count}">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_competency_${a_count}_${c_count}" aria-expanded="true" aria-controls="collapse_competency_${a_count}_${c_count}" style="background-color:#e9ecef;">
              Competency Standard
            </button>
            {{ competency_form.title }}
            <div class="invalid-feedback">
              All fields must be filled in
            </div>
          </h2>
          
          <!-- Start of Performance Standard Template -->
          <div id="collapse_competency_${a_count}_${c_count}" class="border mt-4 bg-white border-secondary accordion-collapse collapse show" aria-labelledby="competency_heading_${a_count}_${c_count}" data-bs-parent="#competencies_${a_count}">
            <div class="border py-4 accordion-body" style="background-color: #e9ecef;">
              <div class="row mx-3">
                <div class="col-sm-1 fw-bold">SN</div>
                <div class="col-sm-4 fw-bold">Knowledge / Abilities</div>
                <div class="col-sm-4 fw-bold">Assessment Criteria</div>
                <div class="col-sm-3 fw-bold">Outcome</div>
              </div>
            </div>
            <div class="performance_statement">
              <div class="mt-3 mx-3 mb-4">
                <div class="container pb-4" style="background-color: #e9ecef;">
                  <div class="row">
                    <div class="col-sm-1"></div>
                    
                    <div class="col-sm-4 performance_type" style="display:inline-flex;">
                      {% for choice in performance_form.label_type %}
                        <div class="form-check">
                          {{choice.tag}}
                          {{ choice.choice_label }}
                          {% if forloop.last %}
                            <div class="invalid-feedback validate_KA">
                              All fields must be filled in
                            </div>
                          {% endif %}
                        </div>
                      {% endfor %}
                    </div>

                    <div class="col-sm-4"></div>
                    <div class="col-sm-3"><label style="font-weight:500;font-size:12px;margin-top:12px;">Dropdown Placeholder Text</label></div>
                  </div>
                  <div class="m-2">
                    <div class="row mb-3">
                      <div class="col-sm-1">
                        {{ performance_form.sn }}
                        <div class="invalid-feedback" style="font-size:10px;">
                          All fields must be filled in
                        </div>
                      </div>
                      <div class="col-sm-4">
                        {{ performance_form.label }}
                        <div class="invalid-feedback">
                          All fields must be filled in
                        </div>
                      </div>
                      <div class="col-sm-4">
                        {{performance_form.criteria}}
                        <div class="invalid-feedback">
                          All fields must be filled in
                        </div>
                      </div>
                      <div class="col-sm-3">    
                        {{performance_form.outcome_title}}
                        <div>
                          <label style="font-weight:500;font-size:12px;margin-top:12px; margin-left:5px;">Dropdown Options</label>
                          <div class="dropdown_options"></div>
                          <button type='button' class="unstyled-button" onclick="add_dropdown_option(this)">
                              <label style="font-weight:300;font-size:12px;margin-top:12px; margin-left:5px;">+ Add Option</label>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
<!-- Add Performance -->
            <div class="input-group mb-3 mx-auto" style="width:20em;" onclick="add_performance_statement(this)">
              <button class="btn" style="background-color:green; color:white;" type="button" id="button-addon1">+</button>
              <button class="btn btn-success" type="button">ADD PERFORMANCE STATEMENT</button>
            </div>
          </div>
        `;
        id.closest(".competencies").querySelector('.accordion').appendChild(competency_statement);
      }
      
      // Adding Assessment 
      function add_assessment(){          
          var chosen = $('#id_type option:selected').text();
          console.log(chosen);
          if (chosen == "Project Report"){
            var count = document.querySelector("#assessments").lastElementChild;
            console.log(count);
            if (count == null){
              count = 1;
            }
            else {
              count = count.querySelector('.accordion-header').getAttribute('id');
              count = parseInt(count.substr(count.length -1))+1;
            }
            var assessment = document.createElement("div");
            assessment.className = "accordion-item project";
            assessment.innerHTML = `<h2 class="accordion-header" id="assessment_heading_${count}">
                                      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_assessment_${count}" aria-expanded="true" aria-controls="collapse_assessment_${count}">
                                        PROJECT REPORT
                                      </button>
                                    </h2>
                                    <div id="collapse_assessment_${count}" class="accordion-collapse collapse show" aria-labelledby="assessment_heading_${count}" data-bs-parent="#assessments">
                                      <div class="accordion-body">
                                        <div class="competencies" id="competencies_${count}">
                                          <div class="accordion">
                                            <div class="pt-0 jumbotron accordion-item">
                                              <!-- Start of Competency Standard Template -->
                                              <h2 class="accordion-header" id="competency_heading${count}_1">
                                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_competency_${count}_1" aria-expanded="true" aria-controls="collapse_competency_${count}_1" style="background-color:#e9ecef;">
                                                  Competency Standard
                                                </button>
                                                {{ competency_form.title }}
                                                <div class="invalid-feedback">
                                                  All fields must be filled in
                                                </div>
                                              </h2>
                                              
                                              <!-- Start of Performance Standard Template -->
                                              <div id="collapse_competency_${count}_1" class="border mt-4 bg-white border-secondary accordion-collapse collapse show" aria-labelledby="competency_heading_${count}_1" data-bs-parent="#competencies_${count}">
                                                <div class="border py-4 accordion-body" style="background-color: #e9ecef;">
                                                  <div class="row mx-3">
                                                    <div class="col-sm-1 fw-bold">SN</div>
                                                    <div class="col-sm-4 fw-bold">Knowledge / Abilities</div>
                                                    <div class="col-sm-4 fw-bold">Assessment Criteria</div>
                                                    <div class="col-sm-3 fw-bold">Outcome</div>
                                                  </div>
                                                </div>
                                                <div class="performance_statement">
                                                  <div class="mt-3 mx-3 mb-4">
                                                    <div class="container pb-4"  style="background-color: #e9ecef;">
                                                      <div class="row">
                                                        <div class="col-sm-1"></div>
                                                        <div class="col-sm-4 performance_type" style="display:inline-flex;">
                                                          {% for choice in performance_form.label_type %}
                                                            <div class="form-check">
                                                              {{choice.tag}}
                                                              {{ choice.choice_label }}
                                                              {% if forloop.last %}
                                                                <div class="invalid-feedback validate_KA">
                                                                  All fields must be filled in
                                                                </div>
                                                              {% endif %}
                                                            </div>
                                                          {% endfor %}
                                                        </div>
                                                        <div class="col-sm-4"></div>
                                          <!-- Dropdown option placeholder text  -->
                                                        <div class="col-sm-3"><label style="font-weight:500;font-size:12px;margin-top:12px;">Dropdown Placeholder Text</label></div>
                                                      </div>
                                                      <div class="m-2">
                                                        <div class="row mb-3">
                                          <!-- Performance Statement Form details  -->
                                                          <div class="col-sm-1">
                                                            {{ performance_form.sn }}
                                                            <div class="invalid-feedback" style="font-size:10px;">
                                                              All fields must be filled in
                                                            </div>
                                                          </div>
                                                          <div class="col-sm-4">
                                                            {{ performance_form.label }}
                                                            <div class="invalid-feedback">
                                                              All fields must be filled in
                                                            </div>
                                                          </div>
                                                          <div class="col-sm-4">
                                                            {{performance_form.criteria}}
                                                            <div class="invalid-feedback">
                                                              All fields must be filled in
                                                            </div>
                                                          </div>
                                                          <div class="col-sm-3">
                                                            {{performance_form.outcome_title}}
                                                            <div>
                                                              <label style="font-weight:500;font-size:12px;margin-top:12px; margin-left:5px;">Dropdown Options</label>
                                                              <div class="dropdown_options"></div>
                                                              <button type='button' class="unstyled-button" onclick="add_dropdown_option(this)">
                                                                  <label style="font-weight:300;font-size:12px;margin-top:12px; margin-left:5px;">+ Add Option</label>
                                                              </button>
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                    <!-- Add Performance -->
                                                <div class="input-group mb-3 mx-auto" style="width:20em;" onclick="add_performance_statement(this)">
                                                  <button class="btn" style="background-color:green; color:white;" type="button" id="button-addon1">+</button>
                                                  <button class="btn btn-success" type="button">ADD PERFORMANCE STATEMENT</button>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          <!-- Add Competency -->
                                          <div class="input-group mb-3 mx-auto" style="width:20em;" onclick="add_competency_statement(this)">
                                            <button class="btn" style="background-color:green; color:white;" type="button" id="button-addon1">+</button>
                                            <button class="btn btn-success" type="button" id="button-addon1">ADD COMPETENCY STATEMENT</button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  `;          
          }
          else if (chosen=="Project Presentation"){
            var count = document.querySelector("#assessments").lastElementChild;
            if (count == null){
              count = 1;
            }
            else {
              count = count.querySelector('.accordion-header').getAttribute('id');
              count = parseInt(count.substr(count.length -1))+1;
            }
            var assessment = document.createElement("div");
            assessment.className = "accordion-item project";
            assessment.innerHTML = `<h2 class="accordion-header" id="assessment_heading_${count}">
                                      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_assessment_${count}" aria-expanded="true" aria-controls="collapse_assessment_${count}">
                                        PROJECT PRESENTATION
                                      </button>
                                    </h2>
                                    <div id="collapse_assessment_${count}" class="accordion-collapse collapse show" aria-labelledby="assessment_heading_${count}" data-bs-parent="#assessments">
                                      <div class="accordion-body">
                                        <div class="competencies" id="competencies_${count}">
                                          <div class="accordion">
                                            <div class="pt-0 jumbotron accordion-item">
                                              <!-- Start of Competency Standard Template -->
                                              <h2 class="accordion-header" id="competency_heading${count}_1">
                                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_competency_${count}_1" aria-expanded="true" aria-controls="collapse_competency_${count}_1" style="background-color:#e9ecef;">
                                                  Competency Standard
                                                </button>
                                                {{ competency_form.title }}
                                                <div class="invalid-feedback">
                                                  All fields must be filled in
                                                </div>
                                              </h2>
                                              
                                              <!-- Start of Performance Standard Template -->
                                              <div id="collapse_competency_${count}_1" class="border mt-4 bg-white border-secondary accordion-collapse collapse show" aria-labelledby="competency_heading_${count}_1" data-bs-parent="#competencies_${count}">
                                                <div class="border py-4 accordion-body" style="background-color: #e9ecef;">
                                                  <div class="row mx-3">
                                                    <div class="col-sm-1 fw-bold">SN</div>
                                                    <div class="col-sm-4 fw-bold">Knowledge / Abilities</div>
                                                    <div class="col-sm-4 fw-bold">Assessment Criteria</div>
                                                    <div class="col-sm-3 fw-bold">Outcome</div>
                                                  </div>
                                                </div>
                                                <div class="performance_statement">
                                                  <div class="mt-3 mx-3 mb-4">
                                                    <div class="container pb-4"  style="background-color: #e9ecef;">
                                                      <div class="row">
                                                        <div class="col-sm-1"></div>
                                                        <div class="col-sm-4 performance_type" style="display:inline-flex;">
                                                          {% for choice in performance_form.label_type %}
                                                            <div class="form-check">
                                                              {{choice.tag}}
                                                              {{ choice.choice_label }}
                                                              {% if forloop.last %}
                                                                <div class="invalid-feedback validate_KA">
                                                                  All fields must be filled in
                                                                </div>
                                                              {% endif %}
                                                            </div>
                                                          {% endfor %}
                                                        </div>
                                                        <div class="col-sm-4"></div>
                                          <!-- Dropdown option placeholder text  -->
                                                        <div class="col-sm-3"><label style="font-weight:500;font-size:12px;margin-top:12px;">Dropdown Placeholder Text</label></div>
                                                      </div>
                                                      <div class="m-2">
                                                        <div class="row mb-3">
                                          <!-- Performance Statement Form details  -->
                                                          <div class="col-sm-1">
                                                            {{ performance_form.sn }}
                                                            <div class="invalid-feedback" style="font-size:10px;">
                                                              All fields must be filled in
                                                            </div>
                                                          </div>
                                                          <div class="col-sm-4">
                                                            {{ performance_form.label }}
                                                            <div class="invalid-feedback">
                                                              All fields must be filled in
                                                            </div>
                                                          </div>
                                                          <div class="col-sm-4">
                                                            {{performance_form.criteria}}
                                                            <div class="invalid-feedback">
                                                              All fields must be filled in
                                                            </div>
                                                          </div>
                                                          <div class="col-sm-3">
                                                            {{performance_form.outcome_title}}
                                                            <div>
                                                              <label style="font-weight:500;font-size:12px;margin-top:12px; margin-left:5px;">Dropdown Options</label>
                                                              <div class="dropdown_options"></div>
                                                              <button type='button' class="unstyled-button" onclick="add_dropdown_option(this)">
                                                                  <label style="font-weight:300;font-size:12px;margin-top:12px; margin-left:5px;">+ Add Option</label>
                                                              </button>
                                                            </div>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                                </div>
                                    <!-- Add Performance -->
                                                <div class="input-group mb-3 mx-auto" style="width:20em;" onclick="add_performance_statement(this)">
                                                  <button class="btn" style="background-color:green; color:white;" type="button" id="button-addon1">+</button>
                                                  <button class="btn btn-success" type="button">ADD PERFORMANCE STATEMENT</button>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          <!-- Add Competency -->
                                          <div class="input-group mb-3 mx-auto" style="width:20em;" onclick="add_competency_statement(this)">
                                            <button class="btn" style="background-color:green; color:white;" type="button" id="button-addon1">+</button>
                                            <button class="btn btn-success" type="button" id="button-addon1">ADD COMPETENCY STATEMENT</button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                  `;
        }
        var check = document.getElementById('id_type').children;
        if (check[1].disabled == false && check[2].disabled == false ){
          var buttons = document.createElement("div");
          buttons.className = "group mb-5";
          buttons.innerHTML = `
            <button type="button" id="back_btn" class="btn misc">BACK</button>
            <button type="submit" class="btn" style="background-color: #961f63; color:#ffffff;">SAVE</button>
            <button type="button" id="cancel_btn" class="btn misc">CANCEL</button>
            `;
        }
        var options = $('#id_type option:selected');
        options.prop('disabled',true);
        $('#id_type option').prop('selected', function() {
          return this.defaultSelected;
        });
        document.getElementById('assessments').appendChild(assessment);
        document.querySelector('#form_builder').appendChild(buttons);

        // Modal Save/Deletion/Confirmation 
        document.getElementById("btnSaveY").addEventListener("click", function () {
          success_modal.show();
        });

        document.getElementById("btnSaveN").addEventListener("click", function () {
          save_modal.hide();
        });

        document.getElementById("btnConfirmY").addEventListener("click", function () {
          success_modal.hide();
        });

        document.getElementById("btnConfirmN").addEventListener("click", function () {
          success_modal.hide();
        });

        document.getElementById("back_btn").addEventListener("click", function () {
          delete_modal.show();
        });

        document.getElementById("cancel_btn").addEventListener("click", function () {
          delete_modal.show();
        });

        document.getElementById("btnDeleteN").addEventListener("click", function () {
          delete_modal.hide();
        });
      };

      $(document).ready(function(){
        $("form").submit(function(){
          var valid = true;
          var checks = document.getElementsByClassName('form-control');
          var ka = document.getElementsByClassName('form-check-input');
          for (i=0; i<checks.length; i++){
            if (checks[i].validity.valid == false){
              valid = false;
            }
          }
          for (i=0; i<ka.length; i++){
            if (ka[i].validity.valid == false){
              valid = false;
            }
          }
          event.preventDefault();
          if (valid == true){
            const save = document.getElementById('confirm');
            const save_modal = new bootstrap.Modal(save);
            save_modal.show();
          }
        })
      });

    </script>
    <title>Assessment Form Builder</title>
  </head>
  <body>
    <div class='col-sm-12 text-center'>
        <p class="h5" style="margin-top:4em; margin-bottom:3em; text-decoration: underline #961f63 1px; text-underline-offset:0.5em;"> Assessment Form Builder </p>
    </div>

    <div class='container'>
        <div class='col-sm-12' style="margin-bottom:83px;">
            <form action='' method='POST' style="margin: auto">
                <div class='col-sm-12 mb-4'>
                    <div class="form-group">
                        <label for="emailInput" style="font-weight: bold; margin-bottom:25px;">1. Purpose of assessment</label>
                        <div>
                          {{assessment_form.type}}
                          <button type="button" class="btn btn-success" style="font-family: WorkSansMedium; padding-left:15px;line-height:inherit; margin-left:30px;" onclick="add_assessment()">Create Form</div></button>
                        </div>

                    </div>
            </form>

        </div>
        <form class="needs-validation" novalidate>
          <div id="form_builder">
            <div class="container mx-auto accordion mb-4" id="assessments">
              
            </div>
          </div>
        </form>
        
    </div>

    <!-- Confirmation Alert Modal -->
    <div class="modal fade" tabindex="-1" id="confirm">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="margin:0 auto;">
            <i class="bi bi-exclamation-triangle-fill" style="color:#fcd462; font-size:2em; z-index: 1;"></i>
            <i class="bi bi-circle-fill" style="color: #f0485d; position: absolute; margin-left: -9px; font-size: 50px; top:4px;"></i>
          </div>
          <div class="modal-body pt-0" style="border-top:none; padding-left: 5rem; padding-right: 5rem;">
            <p class="text-center h3 fw-bold" style="font-family: WorkSans;">Are you sure about saving the assessment form?</p>
            <p class="text-center fw-normal h5" style="font-family: WorkSans;">You can still make changes afterwards.</p>
          </div>
          <div class="modal-footer pt-0 pb-4" style="justify-content: center; border-top:none; margin:0.6rem;">
            <button type="button" class="btn save text-center fw-bold" id="btnSaveY" data-dismiss="modal" style="background-color: #fef5fa; color: #961f63; font-family: WorkSans;">YES</button>
            <button type="button" class="btn save text-center fw-bold" id="btnSaveN" style="background-color: #961f63; font-family: WorkSans; color: #ffffff">NO</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Confirmation Alert Modal -->
    <div class="modal fade" tabindex="-1" id="success">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="margin:0 auto;">
            <img src="{% static 'Success.png' %}">
          </div>
          <div class="modal-body pt-0" style="border-top:none; padding-left: 5rem; padding-right: 5rem;">
            <p class="text-center h3 fw-bold" style="font-family: WorkSans;">Form saved successfully.</p>
            <p class="text-center fw-normal h5" style="font-family: WorkSans;">You can still make changes afterwards.</p>
          </div>
          <div class="modal-footer pt-0 pb-4" style="justify-content: center; border-top:none; margin:0.6rem;">
            <button type="button" class="btn save text-center fw-bold" id="btnConfirmY" data-dismiss="modal" style="width: 139px; height: 48px; background-color: #fef5fa; color: #961f63; font-family: WorkSans;">BACK TO LISTING</button>
            <button type="button" class="btn save text-center fw-bold" id="btnConfirmN" style="width: 139px; height: 48px; background-color: #961f63; font-family: WorkSans; color: #ffffff">BACK TO FORM</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Delete Alert Modal -->
    <div class="modal fade" tabindex="-1" id="delete">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header" style="margin:0 auto;">
            <i class="bi bi-exclamation-triangle-fill" style="color:#fcd462; font-size:2em; z-index: 1;"></i>
            <i class="bi bi-circle-fill" style="color: #f0485d; position: absolute; margin-left: -9px; font-size: 50px; top:4px;"></i>
          </div>
          <div class="modal-body pt-0" style="border-top:none; padding-left: 5rem; padding-right: 5rem;">
            <p class="text-center h3 fw-bold" style="font-family: WorkSans;">Are you sure about deleting the form?</p>
            <p class="text-center fw-normal h5" style="font-family: WorkSans;">This action cannot be reversed.</p>
          </div>
          <div class="modal-footer pt-0 pb-4" style="justify-content: center; border-top:none; margin:0.6rem;">
            <button type="button" class="btn save text-center fw-bold" id="btnDeleteY" data-dismiss="modal" style="background-color: #fef5fa; color: #961f63; font-family: WorkSans;">YES</button>
            <button type="button" class="btn save text-center fw-bold" id="btnDeleteN" style="background-color: #961f63; font-family: WorkSans; color: #ffffff">NO</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- Popper.js first, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
    
    <script>
      // Form validation Bootstrap
        var forms = document.querySelectorAll('.needs-validation');
        
        Array.prototype.slice.call( forms ).forEach( function( form )
        {
            form.addEventListener( 'submit', function ( event )
            {
                if ( !form.checkValidity( ) )
                {
                    event.preventDefault( )
                    event.stopPropagation( );
                }

                form.classList.add( 'was-validated' );
          }, false );
        } );

        // Toggling to modals 
        const save = document.getElementById('confirm');
        const save_modal = new bootstrap.Modal(save);
        const success = document.getElementById("success");
        const success_modal = new bootstrap.Modal(success);
        const deletion = document.getElementById("delete");
        const delete_modal = new bootstrap.Modal(deletion);
        
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  </body>
</html>
